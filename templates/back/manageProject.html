{% extends 'back/base.html' %}
{% block static_files %}
{% endblock %}
{% block body_part %}
<section id="main-content">
  <section class="wrapper">
    <div class="row">
      <div class="col-lg-12">
        <ol class="breadcrumb">
          <li><i class="fa fa-home"></i><a href="index.html">主页</a></li>
          <li><i class="icon_document_alt"></i>项目管理</li>
          <li><i class="fa fa-files-o"></i>查看项目</li>
        </ol>
      </div>
    </div>
    <!-- Form validations -->
    <div class="row">
      <div class="col-lg-12">
        <section class="panel">
          <header class="panel-heading">
            所有项目
          </header>
          <div class="panel-body">
            <table class="table table-striped table-advance table-hover">
              <thead>
                <th>项目id</th>
                <th>项目名称</th>
                <th>项目类别</th>
                <th>项目专业</th>
                <th>项目来源</th>
                <th>发布者</th>
                <th>提交时间</th>
                <!-- <th>操作</th> -->
              </thead>
              <tbody>
                {% for project in projects %}
                <tr>
                  <td>{{project.pid}}</td>
                  <td>{{project.pname}}</td>
                  {% if project.type == "1" %}
                  <td>App开发/微信小程序开发</td>
                  {% endif %}
                  {% if project.type == "2" %}
                  <td>通信/网络</td>
                  {% endif %}
                  {% if project.type == "3" %}
                  <td>软件系统</td>
                  {% endif %}
                  {% if project.type == "4" %}
                  <td>硬件系统</td>
                  {% endif %}
                  {% if project.type == "5" %}
                  <td>视频/图像</td>
                  {% endif %}
                  {% if project.type == "6" %}
                  <td>大数据/机器学习</td>
                  {% endif %}
                  {% if project.status.major == 1 %}
                  <td>通信工程</td>
                  {% endif %}
                  {% if project.status.major == 2 %}
                  <td>信息工程</td>
                  {% endif %}
                  {% if project.status.major == 3 %}
                  <td>电子信息工程</td>
                  {% endif %}
                  <td>{{project.status.source}}</td>
                  <td>{{project.publisher}}</td>
                  <td>{{project.submitTime}}</td>
                  <!-- <td><button class="btn btn-danger" p_id="{{project.pid}}"  onclick="deleteProject()">删除</button></td> -->
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </section>
      </div>
    </div>
    <div class="row">
      <div class="text-center">
        <div>
          <ul class="pagination pagination-lg">
            {% if pagination.has_prev %}
            <li><a href="{{url_for('back.checkProjects',page = pagination.page - 1)}}">«</a></li>
            {% endif %}
            {% for p in pagination.iter_pages() %}
            {% if p == pagination.page%}
            <li class="active"><a href="{{url_for('back.checkProjects',page = p)}}">{{loop.index}}</a></li>
            {% else %}
            <li><a href="{{url_for('back.checkProjects',page = p)}}">{{loop.index}}</a></li>
            {% endif %}
            {% endfor %}
            {% if pagination.has_next %}
            <li><a href="{{url_for('back.checkProjects',page = pagination.page + 1)}}">»</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </section>
</section>
{% endblock %}

{% block js_files %}
<script>
    function deleteProject() {
        alert('确定删除吗？');
        var data={};
        data.pid=$(this).attr("p_id");
        $.ajax({
            url:"/api/admin/deleteUser",
            type:"post",
            data: JSON.stringify(data),
            dataType: 'json',
            success: function (data) {
                alert(data.msg); //提交成功
                window.location.href="{{url_for('back.manageUser')}}"
                //window.location.href='';//跳转到个人中心
            },
            error: function (data) {
                alert(data.msg);  //提交失败
            }
        });
    }
</script>
{% endblock %}